<!DOCTYPE html>
<html>
<head>
    <title>SOMETHING</title>
    <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.3.11/d3.min.js"></script>
</head>

<body>

<h1> 2013 </h1>
<h2> books[year].meta.count </h2>
<svg id="books-2013"></svg>

<script> 
var h = 500,
    w = 550,
    margin = 15,
    cols = 10;

var svg = d3.select('#books-2013')
    .attr('height', h)
    .attr('width', w);

//Scale
var x = d3.scale.linear().domain([0,cols]).range([margin, w - margin])
var y = d3.scale.linear().domain([0,12]).range([margin, h - margin])
var color = d3.scale.linear().domain([0, 233, 467, 700]).range(['gray','blue','yellow','red'])

d3.json('books.json', function(err,books){
    books=books[2013].books;
    svg.selectAll('circle')
        .data(books)
        .enter() //any new datapoint
        .append('circle')
            .attr('r', 10)
            .attr('cx', function(d, idx){ //d is a book (special coloring would go here), idx is the index
                return x(idx % cols);
            })
            .attr('cy', function(d,idx){
                return y(Math.floor(idx / cols));
            })
            .attr('fill', function(d){
                return color(d.num_pages);

            })
            .on('mouseover',function(d){
                console.log(d);
            })

    console.log(books);
})
</script>

</body>
</html>